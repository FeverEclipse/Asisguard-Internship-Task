<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32 Modbus Slave: GitHub/Asisguard-Internship-Task/Core/Src/modbusSlave.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">STM32 Modbus Slave
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e5fbe6d2783ccd4c93c7856d92d7be6e.html">GitHub</a></li><li class="navelem"><a class="el" href="dir_9bd8f55bc36890239d274fcdd484b91a.html">Asisguard-Internship-Task</a></li><li class="navelem"><a class="el" href="dir_7137f7e78807f2ff4736d88de84b80f2.html">Core</a></li><li class="navelem"><a class="el" href="dir_89f6ff98154bb4ea75edd8360d0db210.html">Src</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">modbusSlave.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>: Modbus slave functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="modbus_slave_8h_source.html">modbusSlave.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="modbus__crc_8h_source.html">modbus_crc.h</a>&quot;</code><br />
<code>#include &quot;string.h&quot;</code><br />
<code>#include &quot;<a class="el" href="tmpsensor_8h_source.html">tmpsensor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="system__stm32g4xx_8h_source.html">system_stm32g4xx.h</a>&quot;</code><br />
</div>
<p><a href="modbus_slave_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab803f71e95c32cfcf8ac77317df00cd3" id="r_ab803f71e95c32cfcf8ac77317df00cd3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab803f71e95c32cfcf8ac77317df00cd3">sendData</a> (uint8_t *data, int size)</td></tr>
<tr class="memdesc:ab803f71e95c32cfcf8ac77317df00cd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function takes in the data buffer and adds the CRC bytes to it. And then transmits the data to the master device.  <br /></td></tr>
<tr class="separator:ab803f71e95c32cfcf8ac77317df00cd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4ee585df1b3d76fa0db754edf3d3ee2" id="r_af4ee585df1b3d76fa0db754edf3d3ee2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af4ee585df1b3d76fa0db754edf3d3ee2">modbusException</a> (uint8_t exceptioncode)</td></tr>
<tr class="memdesc:af4ee585df1b3d76fa0db754edf3d3ee2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function creates an exception message and passes it to the sendData function.  <br /></td></tr>
<tr class="separator:af4ee585df1b3d76fa0db754edf3d3ee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9eeef4ca334c5588e6a459f8bc1f2fe" id="r_ad9eeef4ca334c5588e6a459f8bc1f2fe"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad9eeef4ca334c5588e6a459f8bc1f2fe">readHoldingRegs</a> (void)</td></tr>
<tr class="memdesc:ad9eeef4ca334c5588e6a459f8bc1f2fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function adds the requested holding registers from the received message to the transmit buffer and passes it to the sendData function.  <br /></td></tr>
<tr class="separator:ad9eeef4ca334c5588e6a459f8bc1f2fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32e8d50826353e000c6198452778a0e6" id="r_a32e8d50826353e000c6198452778a0e6"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a32e8d50826353e000c6198452778a0e6">updateInputs</a> (void)</td></tr>
<tr class="memdesc:a32e8d50826353e000c6198452778a0e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function updates the input values in the Input_Registers_Database list.  <br /></td></tr>
<tr class="separator:a32e8d50826353e000c6198452778a0e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ebc15ce8ec07345a4aff8191cc954fa" id="r_a4ebc15ce8ec07345a4aff8191cc954fa"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4ebc15ce8ec07345a4aff8191cc954fa">readInputRegs</a> (void)</td></tr>
<tr class="memdesc:a4ebc15ce8ec07345a4aff8191cc954fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function adds the requested input registers from the received message to the transmit buffer and passes it to the sendData function.  <br /></td></tr>
<tr class="separator:a4ebc15ce8ec07345a4aff8191cc954fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98b24f16d2dea8af15e0efebb165329d" id="r_a98b24f16d2dea8af15e0efebb165329d"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a98b24f16d2dea8af15e0efebb165329d">writeSingleReg</a> (void)</td></tr>
<tr class="memdesc:a98b24f16d2dea8af15e0efebb165329d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function writes to a single register specified by the request message.  <br /></td></tr>
<tr class="separator:a98b24f16d2dea8af15e0efebb165329d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457d38bf65ccc6c07dad6d107d1aeb2b" id="r_a457d38bf65ccc6c07dad6d107d1aeb2b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a457d38bf65ccc6c07dad6d107d1aeb2b">incrementRegByOne</a> (void)</td></tr>
<tr class="memdesc:a457d38bf65ccc6c07dad6d107d1aeb2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function increments a specified register by one and passes it to the sendData function.  <br /></td></tr>
<tr class="separator:a457d38bf65ccc6c07dad6d107d1aeb2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4926274dfc2df9d7cbf191331ef0bca4" id="r_a4926274dfc2df9d7cbf191331ef0bca4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4926274dfc2df9d7cbf191331ef0bca4">decrementRegByOne</a> (void)</td></tr>
<tr class="memdesc:a4926274dfc2df9d7cbf191331ef0bca4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function decrements a specified register by one and passes it to the sendData function.  <br /></td></tr>
<tr class="separator:a4926274dfc2df9d7cbf191331ef0bca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50f6206d115af1723a68aef92b4e1ca0" id="r_a50f6206d115af1723a68aef92b4e1ca0"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a50f6206d115af1723a68aef92b4e1ca0">readTemp</a> (double temp)</td></tr>
<tr class="memdesc:a50f6206d115af1723a68aef92b4e1ca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function adds the temperature value from the device to the buffer and passes it to the sendData function.  <br /></td></tr>
<tr class="separator:a50f6206d115af1723a68aef92b4e1ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a51c331141db087324cddd48d645c9717" id="r_a51c331141db087324cddd48d645c9717"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a51c331141db087324cddd48d645c9717">rx_buffer</a> [256]</td></tr>
<tr class="separator:a51c331141db087324cddd48d645c9717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c4eef05b5ed378bd65dfebd5eb8343b" id="r_a0c4eef05b5ed378bd65dfebd5eb8343b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c4eef05b5ed378bd65dfebd5eb8343b">tx_buffer</a> [256]</td></tr>
<tr class="separator:a0c4eef05b5ed378bd65dfebd5eb8343b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9479c261d65eecedd3d9582f7f0f89c" id="r_aa9479c261d65eecedd3d9582f7f0f89c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___u_a_r_t___exported___types.html#ga5de4a49eb132735325e706f406c69d6e">UART_HandleTypeDef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9479c261d65eecedd3d9582f7f0f89c">huart2</a></td></tr>
<tr class="separator:aa9479c261d65eecedd3d9582f7f0f89c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f80d9bdce270168a13ff861fff75c2c" id="r_a7f80d9bdce270168a13ff861fff75c2c"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f80d9bdce270168a13ff861fff75c2c">calculatedCrc</a></td></tr>
<tr class="separator:a7f80d9bdce270168a13ff861fff75c2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a367ca61fce9b0fafd8a554d9e7eea949" id="r_a367ca61fce9b0fafd8a554d9e7eea949"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a367ca61fce9b0fafd8a554d9e7eea949">receivedCrc</a></td></tr>
<tr class="separator:a367ca61fce9b0fafd8a554d9e7eea949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3d2c59ee0e3bbae1b99529a154eb62" id="r_aac3d2c59ee0e3bbae1b99529a154eb62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_t_i_m___handle_type_def.html">TIM_HandleTypeDef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac3d2c59ee0e3bbae1b99529a154eb62">htim3</a></td></tr>
<tr class="separator:aac3d2c59ee0e3bbae1b99529a154eb62"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>: Modbus slave functionality. </p>

<p class="definition">Definition in file <a class="el" href="modbus_slave_8c_source.html">modbusSlave.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4926274dfc2df9d7cbf191331ef0bca4" name="a4926274dfc2df9d7cbf191331ef0bca4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4926274dfc2df9d7cbf191331ef0bca4">&#9670;&#160;</a></span>decrementRegByOne()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t decrementRegByOne </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function decrements a specified register by one and passes it to the sendData function. </p>
<p>The byte structure of the response is as follows:<br  />
| Slave ID -&gt; 1 BYTE | Function Code -&gt; 1 BYTE | Register Address -&gt; 2 BYTES | Updated Register Value -&gt; 2 BYTES | CRC -&gt; 2 BYTES | </p>

<p class="definition">Definition at line <a class="el" href="modbus_slave_8c_source.html#l00276">276</a> of file <a class="el" href="modbus_slave_8c_source.html">modbusSlave.c</a>.</p>

</div>
</div>
<a id="a457d38bf65ccc6c07dad6d107d1aeb2b" name="a457d38bf65ccc6c07dad6d107d1aeb2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a457d38bf65ccc6c07dad6d107d1aeb2b">&#9670;&#160;</a></span>incrementRegByOne()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t incrementRegByOne </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function increments a specified register by one and passes it to the sendData function. </p>
<p>The byte structure of the response is as follows:<br  />
| Slave ID -&gt; 1 BYTE | Function Code -&gt; 1 BYTE | Register Address -&gt; 2 BYTES | Updated Register Value -&gt; 2 BYTES | CRC -&gt; 2 BYTES| </p>

<p class="definition">Definition at line <a class="el" href="modbus_slave_8c_source.html#l00235">235</a> of file <a class="el" href="modbus_slave_8c_source.html">modbusSlave.c</a>.</p>

</div>
</div>
<a id="af4ee585df1b3d76fa0db754edf3d3ee2" name="af4ee585df1b3d76fa0db754edf3d3ee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4ee585df1b3d76fa0db754edf3d3ee2">&#9670;&#160;</a></span>modbusException()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void modbusException </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>exceptioncode</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function creates an exception message and passes it to the sendData function. </p>
<p>The byte structure of the response is as follows:<br  />
| SLAVE_ID -&gt; 1 BYTE | FUNCTION_CODE -&gt; 1 BYTE | Exception code -&gt; 1 BYTE | CRC -&gt; 2 BYTES |<br  />
</p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exceptioncode</td><td>The exception code to add to the transmit buffer. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="modbus_slave_8c_source.html#l00043">43</a> of file <a class="el" href="modbus_slave_8c_source.html">modbusSlave.c</a>.</p>

</div>
</div>
<a id="ad9eeef4ca334c5588e6a459f8bc1f2fe" name="ad9eeef4ca334c5588e6a459f8bc1f2fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9eeef4ca334c5588e6a459f8bc1f2fe">&#9670;&#160;</a></span>readHoldingRegs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t readHoldingRegs </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function adds the requested holding registers from the received message to the transmit buffer and passes it to the sendData function. </p>
<p>The holding registers are read-write permitted for outside-of-device access and can be used for temporary/custom values. The byte structure of the response is as follows:<br  />
| SLAVE_ID -&gt; 1 BYTE | FUNCTION_CODE -&gt; 1 BYTE | BYTE COUNT -&gt; 1 BYTE | DATA -&gt; N(Requested register count)*2 BYTES| CRC -&gt; 2 BYTES| </p>

<p class="definition">Definition at line <a class="el" href="modbus_slave_8c_source.html#l00058">58</a> of file <a class="el" href="modbus_slave_8c_source.html">modbusSlave.c</a>.</p>

</div>
</div>
<a id="a4ebc15ce8ec07345a4aff8191cc954fa" name="a4ebc15ce8ec07345a4aff8191cc954fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ebc15ce8ec07345a4aff8191cc954fa">&#9670;&#160;</a></span>readInputRegs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t readInputRegs </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function adds the requested input registers from the received message to the transmit buffer and passes it to the sendData function. </p>
<p>The input registers are read-only for outside-of-device access and used for storing sensor related information. The byte structure of the response is as follows:<br  />
| SLAVE_ID -&gt; 1 BYTE | FUNCTION_CODE -&gt; 1 BYTE | BYTE COUNT -&gt; 1 BYTE | DATA -&gt; N(Requested register count)*2 BYTES| CRC -&gt; 2 BYTES| </p>

<p class="definition">Definition at line <a class="el" href="modbus_slave_8c_source.html#l00129">129</a> of file <a class="el" href="modbus_slave_8c_source.html">modbusSlave.c</a>.</p>

</div>
</div>
<a id="a50f6206d115af1723a68aef92b4e1ca0" name="a50f6206d115af1723a68aef92b4e1ca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50f6206d115af1723a68aef92b4e1ca0">&#9670;&#160;</a></span>readTemp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t readTemp </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>temp</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function adds the temperature value from the device to the buffer and passes it to the sendData function. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated</a></b></dt><dd></dd></dl>
<p>The first element of the Input_Registers_Database list is assigned to the temperature value and it is advised to use readInputRegisters function for retrieving the temperature data from the device. This is made to obey the default Modbus function code instead of this custom function.</p>
<p>The byte structure of the response is as follows:<br  />
| Slave ID -&gt; 1 BYTE | Function Code -&gt; 1 BYTE | Temperature Value -&gt; 1 BYTE | CRC -&gt; 2 BYTES | </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">temp</td><td>The temperature value from the sensor. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="modbus_slave_8c_source.html#l00321">321</a> of file <a class="el" href="modbus_slave_8c_source.html">modbusSlave.c</a>.</p>

</div>
</div>
<a id="ab803f71e95c32cfcf8ac77317df00cd3" name="ab803f71e95c32cfcf8ac77317df00cd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab803f71e95c32cfcf8ac77317df00cd3">&#9670;&#160;</a></span>sendData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendData </td>
          <td>(</td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function takes in the data buffer and adds the CRC bytes to it. And then transmits the data to the master device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*data</td><td>Data buffer without the CRC bytes added. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the data buffer before adding the CRC bytes. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="modbus_slave_8c_source.html#l00027">27</a> of file <a class="el" href="modbus_slave_8c_source.html">modbusSlave.c</a>.</p>

</div>
</div>
<a id="a32e8d50826353e000c6198452778a0e6" name="a32e8d50826353e000c6198452778a0e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32e8d50826353e000c6198452778a0e6">&#9670;&#160;</a></span>updateInputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t updateInputs </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function updates the input values in the Input_Registers_Database list. </p>
<p>Only the temperature sensor value is used currently. </p>

<p class="definition">Definition at line <a class="el" href="modbus_slave_8c_source.html#l00112">112</a> of file <a class="el" href="modbus_slave_8c_source.html">modbusSlave.c</a>.</p>

</div>
</div>
<a id="a98b24f16d2dea8af15e0efebb165329d" name="a98b24f16d2dea8af15e0efebb165329d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98b24f16d2dea8af15e0efebb165329d">&#9670;&#160;</a></span>writeSingleReg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t writeSingleReg </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function writes to a single register specified by the request message. </p>
<p>The byte structure of the response is as follows:<br  />
| SLAVE_ID -&gt; 1 BYTE | FUNCTION_CODE -&gt; 1 BYTE | Start Addr -&gt; 2 BYTES | Data -&gt; 2 BYTES | CRC -&gt; 2 BYTES | </p>

<p class="definition">Definition at line <a class="el" href="modbus_slave_8c_source.html#l00186">186</a> of file <a class="el" href="modbus_slave_8c_source.html">modbusSlave.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a7f80d9bdce270168a13ff861fff75c2c" name="a7f80d9bdce270168a13ff861fff75c2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f80d9bdce270168a13ff861fff75c2c">&#9670;&#160;</a></span>calculatedCrc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t calculatedCrc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00075">75</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="aac3d2c59ee0e3bbae1b99529a154eb62" name="aac3d2c59ee0e3bbae1b99529a154eb62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac3d2c59ee0e3bbae1b99529a154eb62">&#9670;&#160;</a></span>htim3</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_t_i_m___handle_type_def.html">TIM_HandleTypeDef</a> htim3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00048">48</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="aa9479c261d65eecedd3d9582f7f0f89c" name="aa9479c261d65eecedd3d9582f7f0f89c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9479c261d65eecedd3d9582f7f0f89c">&#9670;&#160;</a></span>huart2</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___u_a_r_t___exported___types.html#ga5de4a49eb132735325e706f406c69d6e">UART_HandleTypeDef</a> huart2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00050">50</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a367ca61fce9b0fafd8a554d9e7eea949" name="a367ca61fce9b0fafd8a554d9e7eea949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a367ca61fce9b0fafd8a554d9e7eea949">&#9670;&#160;</a></span>receivedCrc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t receivedCrc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00074">74</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a51c331141db087324cddd48d645c9717" name="a51c331141db087324cddd48d645c9717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51c331141db087324cddd48d645c9717">&#9670;&#160;</a></span>rx_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t rx_buffer[256]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00071">71</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a0c4eef05b5ed378bd65dfebd5eb8343b" name="a0c4eef05b5ed378bd65dfebd5eb8343b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c4eef05b5ed378bd65dfebd5eb8343b">&#9670;&#160;</a></span>tx_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t tx_buffer[256]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00072">72</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
